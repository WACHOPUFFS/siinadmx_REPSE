<ion-header>
  <ion-toolbar>
    <ion-title>Información Adicional: {{ tareaNombre }}</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="dismiss()">Cerrar</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="container mt-4">
    <form (ngSubmit)="onSubmit()" class="form-horizontal">
      <div *ngIf="error" class="alert alert-danger">{{ error }}</div>

      <div *ngIf="actasConstitutivas.length > 0" class="mb-4">
        <h3>Actas Constitutivas</h3>
        <div *ngFor="let acta of actasConstitutivas" class="border rounded p-3 mb-3">
          <div class="form-group row">
            <label class="col-sm-4 col-form-label">Domicilio Social</label>
            <div class="col-sm-8">
              <ion-input type="text" class="form-control" [(ngModel)]="acta.domicilioSocial" name="domicilioSocial{{acta.id}}"></ion-input>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-sm-4 col-form-label">Nombre Representante</label>
            <div class="col-sm-8">
              <ion-input type="text" class="form-control" [(ngModel)]="acta.nombreRepresentante" name="nombreRepresentante{{acta.id}}"></ion-input>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-sm-4 col-form-label">Número de Escritura</label>
            <div class="col-sm-8">
              <ion-input type="text" class="form-control" [(ngModel)]="acta.numeroEscritura" name="numeroEscritura{{acta.id}}"></ion-input>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-sm-4 col-form-label">Folio Mercantil</label>
            <div class="col-sm-8">
              <ion-input type="text" class="form-control" [(ngModel)]="acta.folioMercantil" name="folioMercantil{{acta.id}}"></ion-input>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-sm-4 col-form-label">Fecha de Constitución</label>
            <div class="col-sm-8">
              <ion-datetime display-format="YYYY-MM-DD" class="form-control" [(ngModel)]="acta.fechaConstitucion" name="fechaConstitucion{{acta.id}}"></ion-datetime>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-sm-4 col-form-label">Nombre del Notario</label>
            <div class="col-sm-8">
              <ion-input type="text" class="form-control" [(ngModel)]="acta.nombreNotario" name="nombreNotario{{acta.id}}"></ion-input>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-sm-4 col-form-label">Nombre de la Notaría</label>
            <div class="col-sm-8">
              <ion-input type="text" class="form-control" [(ngModel)]="acta.nombreNotaria" name="nombreNotaria{{acta.id}}"></ion-input>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-sm-4 col-form-label">Lugar de Facultad</label>
            <div class="col-sm-8">
              <ion-input type="text" class="form-control" [(ngModel)]="acta.lugarFacultad" name="lugarFacultad{{acta.id}}"></ion-input>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-sm-4 col-form-label">Seguro Social</label>
            <div class="col-sm-8">
              <ion-input type="text" class="form-control" [(ngModel)]="acta.seguroSocial" name="seguroSocial{{acta.id}}"></ion-input>
            </div>
          </div>
        </div>
      </div>

      <div *ngIf="afil01.length > 0" class="mb-4">
        <h3>AFIL01</h3>
        <div *ngFor="let afil of afil01" class="border rounded p-3 mb-3">
          <div class="form-group row">
            <label class="col-sm-4 col-form-label">No. Patronal</label>
            <div class="col-sm-8">
              <ion-input type="text" class="form-control" [(ngModel)]="afil.noPatronal" name="noPatronal{{afil.id}}"></ion-input>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-sm-4 col-form-label">No. Reg. Patronal</label>
            <div class="col-sm-8">
              <ion-input type="text" class="form-control" [(ngModel)]="afil.noRegPatronal" name="noRegPatronal{{afil.id}}"></ion-input>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-sm-4 col-form-label">División</label>
            <div class="col-sm-8">
              <ion-input type="text" class="form-control" [(ngModel)]="afil.division" name="division{{afil.id}}"></ion-input>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-sm-4 col-form-label">Grupo</label>
            <div class="col-sm-8">
              <ion-input type="text" class="form-control" [(ngModel)]="afil.grupo" name="grupo{{afil.id}}"></ion-input>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-sm-4 col-form-label">Fracción</label>
            <div class="col-sm-8">
              <ion-input type="text" class="form-control" [(ngModel)]="afil.fraccion" name="fraccion{{afil.id}}"></ion-input>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-sm-4 col-form-label">Clase</label>
            <div class="col-sm-8">
              <ion-input type="text" class="form-control" [(ngModel)]="afil.clase" name="clase{{afil.id}}"></ion-input>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-sm-4 col-form-label">Actividad</label>
            <div class="col-sm-8">
              <ion-input type="text" class="form-control" [(ngModel)]="afil.actividad" name="actividad{{afil.id}}"></ion-input>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-sm-4 col-form-label">Descripción</label>
            <div class="col-sm-8">
              <ion-input type="text" class="form-control" [(ngModel)]="afil.descripcion" name="descripcion{{afil.id}}"></ion-input>
            </div>
          </div>
        </div>
      </div>

      <div *ngIf="rfc.length > 0" class="mb-4">
        <h3>RFC</h3>
        <div *ngFor="let r of rfc" class="border rounded p-3 mb-3">
          <div class="form-group row">
            <label class="col-sm-4 col-form-label">RFC</label>
            <div class="col-sm-8">
              <ion-input type="text" class="form-control" [(ngModel)]="r.rfc" name="rfc{{r.id}}"></ion-input>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-sm-4 col-form-label">CURP</label>
            <div class="col-sm-8">
              <ion-input type="text" class="form-control" [(ngModel)]="r.curp" name="curp{{r.id}}"></ion-input>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-sm-4 col-form-label">Domicilio Fiscal</label>
            <div class="col-sm-8">
              <ion-input type="text" class="form-control" [(ngModel)]="r.domicilioFiscal" name="domicilioFiscal{{r.id}}"></ion-input>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-sm-4 col-form-label">Tipo de Régimen</label>
            <div class="col-sm-8">
              <ion-select class="form-control" [(ngModel)]="r.tipoRegimen" name="tipoRegimen{{r.id}}">
                <ion-select-option value="fisica">Física</ion-select-option>
                <ion-select-option value="moral">Moral</ion-select-option>
              </ion-select>
            </div>
          </div>
          <div class="form-group row" *ngIf="r.tipoRegimen === 'fisica'">
            <label class="col-sm-4 col-form-label">Régimen</label>
            <div class="col-sm-8">
              <ion-select class="form-control" [(ngModel)]="r.regimen" name="regimen{{r.id}}">
                <ion-select-option value="Régimen de Incorporación Fiscal">Régimen de Incorporación Fiscal</ion-select-option>
                <ion-select-option value="Actividades empresariales">Actividades empresariales</ion-select-option>
                <ion-select-option value="Arrendamiento de inmuebles">Arrendamiento de inmuebles</ion-select-option>
                <ion-select-option value="Servicios profesionales">Servicios profesionales</ion-select-option>
              </ion-select>
            </div>
          </div>
          <div class="form-group row" *ngIf="r.tipoRegimen === 'moral'">
            <label class="col-sm-4 col-form-label">Régimen</label>
            <div class="col-sm-8">
              <ion-select class="form-control" [(ngModel)]="r.regimen" name="regimen{{r.id}}">
                <ion-select-option value="Régimen General de Ley">Régimen General de Ley</ion-select-option>
                <ion-select-option value="Régimen de Actividad Agrícola, Ganadera, Silvícola y Pesquera">Régimen de Actividad Agrícola, Ganadera, Silvícola y Pesquera</ion-select-option>
                <ion-select-option value="Régimen de Incorporación Fiscal (RIF)">Régimen de Incorporación Fiscal (RIF)</ion-select-option>
                <ion-select-option value="Régimen de Sociedades Cooperativas de Producción">Régimen de Sociedades Cooperativas de Producción</ion-select-option>
                <ion-select-option value="Régimen de Entidades Controladoras">Régimen de Entidades Controladoras</ion-select-option>
              </ion-select>
            </div>
          </div>
        </div>
      </div>

      <div *ngIf="autorizacion.length > 0" class="mb-4">
        <h3>Autorización STPS</h3>
        <div *ngFor="let auto of autorizacion" class="border rounded p-3 mb-3">
          <div class="form-group row">
            <label class="col-sm-4 col-form-label">Fecha de Autorización</label>
            <div class="col-sm-8">
              <ion-datetime display-format="YYYY-MM-DD" class="form-control" [(ngModel)]="auto.fechaAutorizacion" name="fechaAutorizacion{{auto.id}}"></ion-datetime>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-sm-4 col-form-label">Registro de Autorización</label>
            <div class="col-sm-8">
              <ion-input type="text" class="form-control" [(ngModel)]="auto.registroAutorizacion" name="registroAutorizacion{{auto.id}}"></ion-input>
            </div>
          </div>
          <div *ngFor="let actividad of auto.actividades; let i = index" class="border rounded p-3 mb-2">
            <div class="form-group row">
              <label class="col-sm-4 col-form-label">Actividad</label>
              <div class="col-sm-8">
                <ion-input type="text" class="form-control" [(ngModel)]="actividad.actividad" name="actividad{{auto.id}}{{i}}"></ion-input>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-sm-4 col-form-label">Folio</label>
              <div class="col-sm-8">
                <ion-input type="text" class="form-control" [(ngModel)]="actividad.folio" name="folio{{auto.id}}{{i}}"></ion-input>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="text-center">
        <ion-button type="submit" expand="block" [disabled]="isSubmitting">Guardar Cambios</ion-button>
      </div>
    </form>
  </div>
</ion-content>

<style>
  .container {
  max-width: 800px;
  margin: auto;
}

.border {
  border: 1px solid #dee2e6;
}

.rounded {
  border-radius: 0.25rem;
}

.p-3 {
  padding: 1rem;
}

.mb-2 {
  margin-bottom: 0.5rem;
}

.mb-3 {
  margin-bottom: 1rem;
}

.mb-4 {
  margin-bottom: 1.5rem;
}

.form-horizontal .form-group {
  margin-bottom: 1rem;
}

.form-horizontal .form-group label {
  text-align: left;
}

.form-control {
  width: 100%;
  box-sizing: border-box;
}

.text-center {
  text-align: center;
}

</style>